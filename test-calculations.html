<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Calculations</title>
</head>
<body>
    <h1>Testing Color Calculations</h1>
    <button id="test-btn">Test Calculations</button>
    <div id="results"></div>

    <!-- Load scripts in correct order -->
    <script src="src/js/color-science.js"></script>
    <script>
        document.getElementById('test-btn').addEventListener('click', function() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>Testing...</p>';

            try {
                // Test if color science module is loaded
                if (typeof window.colorScience === 'undefined') {
                    results.innerHTML = '<p style="color: red;">ERROR: colorScience module not loaded!</p>';
                    return;
                }

                // Test basic CMYK to RGB conversion
                const testCmyk = { c: 50, m: 30, y: 70, k: 10 };
                const rgb = window.colorScience.cmykToRgb(testCmyk.c, testCmyk.m, testCmyk.y, testCmyk.k);
                
                // Test LAB values
                const testLab1 = { l: 50, a: 10, b: 20 };
                const testLab2 = { l: 45, a: 15, b: 18 };
                
                // Test Delta E calculation
                const deltaE = window.colorScience.calculateDeltaE(testLab1, testLab2);
                
                // Test component deltas
                const componentDeltas = window.colorScience.calculateComponentDeltas(testLab1, testLab2);

                results.innerHTML = `
                    <h2>Test Results:</h2>
                    <p><strong>Color Science Module:</strong> ✅ Loaded</p>
                    <p><strong>CMYK to RGB:</strong> C${testCmyk.c} M${testCmyk.m} Y${testCmyk.y} K${testCmyk.k} → R${rgb.r} G${rgb.g} B${rgb.b}</p>
                    <p><strong>Delta E:</strong> ${deltaE}</p>
                    <p><strong>Component Deltas:</strong></p>
                    <ul>
                        <li>ΔL*: ${componentDeltas.deltaL}</li>
                        <li>Δa*: ${componentDeltas.deltaA}</li>
                        <li>Δb*: ${componentDeltas.deltaB}</li>
                        <li>ΔC*: ${componentDeltas.deltaC}</li>
                        <li>Δh: ${componentDeltas.deltaH}</li>
                    </ul>
                `;
            } catch (error) {
                results.innerHTML = `<p style="color: red;">ERROR: ${error.message}</p>`;
                console.error('Test error:', error);
            }
        });
    </script>
</body>
</html>