<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Comprehensive UI Enhancements Testing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #d4af37 0%, #f4e4a6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .controls {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            text-align: center;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        .btn.secondary {
            background: #6c757d;
        }

        .btn.secondary:hover {
            background: #545b62;
        }

        .btn.success {
            background: #28a745;
        }

        .btn.success:hover {
            background: #218838;
        }

        .btn.warning {
            background: #ffc107;
            color: #212529;
        }

        .btn.warning:hover {
            background: #e0a800;
        }

        .btn.danger {
            background: #dc3545;
        }

        .btn.danger:hover {
            background: #c82333;
        }

        .results-container {
            padding: 30px;
        }

        .test-suite {
            margin-bottom: 30px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
        }

        .test-suite-header {
            background: #e9ecef;
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .test-suite-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #495057;
        }

        .test-suite-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-running {
            background: #cce5ff;
            color: #004085;
            animation: pulse 1.5s ease-in-out infinite;
        }

        .status-passed {
            background: #d4edda;
            color: #155724;
        }

        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .test-suite-content {
            padding: 20px;
            background: white;
        }

        .test-results {
            margin-top: 20px;
        }

        .result-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .result-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .result-error {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        .result-warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid #ffc107;
        }

        .result-info {
            background: #cce5ff;
            color: #004085;
            border-left: 4px solid #007bff;
        }

        .summary {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .summary h3 {
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .browser-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .browser-info h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .browser-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 0.9rem;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                padding: 20px;
            }
            
            .btn {
                min-width: 120px;
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .summary-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="header">
            <h1>üß™ Final UI Enhancements Testing Suite</h1>
            <p>Comprehensive testing of all UI enhancements with existing calculator functionality</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <h3>Test Execution</h3>
                <button class="btn success" onclick="runAllTests()">
                    <span class="loading hidden" id="loading-all"></span>
                    Run All Tests
                </button>
                <button class="btn" onclick="runCriticalTests()">
                    <span class="loading hidden" id="loading-critical"></span>
                    Critical Tests Only
                </button>
                <button class="btn warning" onclick="runBrowserTests()">
                    <span class="loading hidden" id="loading-browser"></span>
                    Browser Compatibility
                </button>
            </div>
            
            <div class="control-group">
                <h3>Utilities</h3>
                <button class="btn secondary" onclick="clearResults()">Clear Results</button>
                <button class="btn secondary" onclick="exportResults()">Export Report</button>
                <button class="btn secondary" onclick="openMainApp()">Open Calculator</button>
            </div>
        </div>

        <div class="results-container">
            <div class="browser-info" id="browser-info">
                <h4>üåê Browser Information</h4>
                <div class="browser-details" id="browser-details">
                    <div>Loading browser information...</div>
                </div>
            </div>

            <!-- UI Enhancements Test Suite -->
            <div class="test-suite">
                <div class="test-suite-header">
                    <div class="test-suite-title">üé® UI Enhancements Integration</div>
                    <div class="test-suite-status status-pending" id="ui-status">Pending</div>
                </div>
                <div class="test-suite-content">
                    <p>Tests sticky status bar, enhanced tooltips, outlined buttons, and gold accents.</p>
                    <div class="test-results" id="ui-results"></div>
                </div>
            </div>

            <!-- Cross-Browser Compatibility Test Suite -->
            <div class="test-suite">
                <div class="test-suite-header">
                    <div class="test-suite-title">üåê Cross-Browser Compatibility</div>
                    <div class="test-suite-status status-pending" id="browser-status">Pending</div>
                </div>
                <div class="test-suite-content">
                    <p>Tests browser support for CSS features, JavaScript APIs, and modern web standards.</p>
                    <div class="test-results" id="browser-results"></div>
                </div>
            </div>

            <!-- Calculator Integration Test Suite -->
            <div class="test-suite">
                <div class="test-suite-header">
                    <div class="test-suite-title">üßÆ Calculator Integration</div>
                    <div class="test-suite-status status-pending" id="calculator-status">Pending</div>
                </div>
                <div class="test-suite-content">
                    <p>Tests that all existing calculator functionality works with UI enhancements.</p>
                    <div class="test-results" id="calculator-results"></div>
                </div>
            </div>

            <!-- Performance Test Suite -->
            <div class="test-suite">
                <div class="test-suite-header">
                    <div class="test-suite-title">‚ö° Performance & Accessibility</div>
                    <div class="test-suite-status status-pending" id="performance-status">Pending</div>
                </div>
                <div class="test-suite-content">
                    <p>Tests performance impact and accessibility compliance of UI enhancements.</p>
                    <div class="test-results" id="performance-results"></div>
                </div>
            </div>

            <!-- Test Summary -->
            <div class="summary hidden" id="test-summary">
                <h3>üìä Test Summary</h3>
                <div class="summary-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="total-tests">0</div>
                        <div class="stat-label">Total Tests</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="passed-tests" style="color: #28a745;">0</div>
                        <div class="stat-label">Passed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="failed-tests" style="color: #dc3545;">0</div>
                        <div class="stat-label">Failed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="warning-tests" style="color: #ffc107;">0</div>
                        <div class="stat-label">Warnings</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="success-rate">0%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="test-duration">0s</div>
                        <div class="stat-label">Duration</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%;"></div>
                </div>
                <div id="final-assessment"></div>
            </div>
        </div>
    </div>

    <!-- Load test scripts -->
    <script src="test-ui-enhancements-integration.js"></script>
    <script src="test-cross-browser-compatibility.js"></script>

    <script>
        // Global test state
        let globalTestResults = {
            ui: null,
            browser: null,
            calculator: null,
            performance: null,
            startTime: null,
            endTime: null
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
        });

        function initializePage() {
            displayBrowserInfo();
            logMessage('Test suite initialized. Ready to run tests.', 'info');
        }

        function displayBrowserInfo() {
            try {
                const browserInfo = getBrowserInfo ? getBrowserInfo() : detectBrowserInfo();
                const browserDetails = document.getElementById('browser-details');
                
                browserDetails.innerHTML = `
                    <div><strong>Browser:</strong> ${browserInfo.browser} ${browserInfo.version}</div>
                    <div><strong>Platform:</strong> ${navigator.platform}</div>
                    <div><strong>User Agent:</strong> ${browserInfo.userAgent.substring(0, 50)}...</div>
                    <div><strong>Mobile:</strong> ${browserInfo.isMobile ? 'Yes' : 'No'}</div>
                    <div><strong>ES6 Support:</strong> ${browserInfo.supportsES6 ? 'Yes' : 'No'}</div>
                    <div><strong>CSS3 Support:</strong> ${browserInfo.supportsCSS3 ? 'Yes' : 'No'}</div>
                `;
            } catch (error) {
                console.error('Error displaying browser info:', error);
                document.getElementById('browser-details').innerHTML = '<div>Error loading browser information</div>';
            }
        }

        function detectBrowserInfo() {
            const userAgent = navigator.userAgent;
            let browser = 'Unknown';
            let version = 'Unknown';
            
            if (userAgent.includes('Chrome')) {
                browser = 'Chrome';
                version = userAgent.match(/Chrome\/(\d+)/)?.[1] || 'Unknown';
            } else if (userAgent.includes('Firefox')) {
                browser = 'Firefox';
                version = userAgent.match(/Firefox\/(\d+)/)?.[1] || 'Unknown';
            } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {
                browser = 'Safari';
                version = userAgent.match(/Version\/(\d+)/)?.[1] || 'Unknown';
            }

            return {
                browser,
                version,
                userAgent,
                isMobile: /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent),
                supportsES6: typeof Symbol !== 'undefined',
                supportsCSS3: CSS.supports('transform', 'translateY(-100%)')
            };
        }

        function logMessage(message, type = 'info', targetId = null) {
            const timestamp = new Date().toISOString().split('T')[1].split('.')[0];
            const resultDiv = document.createElement('div');
            resultDiv.className = `result-item result-${type}`;
            resultDiv.textContent = `[${timestamp}] ${message}`;
            
            if (targetId) {
                const target = document.getElementById(targetId);
                if (target) {
                    target.appendChild(resultDiv);
                }
            } else {
                // Log to all result containers
                document.querySelectorAll('.test-results').forEach(container => {
                    container.appendChild(resultDiv.cloneNode(true));
                });
            }
            
            console.log(`[${timestamp}] ${message}`);
        }

        function updateTestStatus(suiteId, status) {
            const statusElement = document.getElementById(`${suiteId}-status`);
            if (statusElement) {
                statusElement.textContent = status.charAt(0).toUpperCase() + status.slice(1);
                statusElement.className = `test-suite-status status-${status}`;
            }
        }

        function showLoading(buttonId) {
            const loading = document.getElementById(`loading-${buttonId}`);
            if (loading) {
                loading.classList.remove('hidden');
            }
        }

        function hideLoading(buttonId) {
            const loading = document.getElementById(`loading-${buttonId}`);
            if (loading) {
                loading.classList.add('hidden');
            }
        }

        async function runAllTests() {
            console.log('üöÄ Starting comprehensive testing suite...');
            globalTestResults.startTime = performance.now();
            
            showLoading('all');
            
            try {
                // Run UI Enhancements Tests
                updateTestStatus('ui', 'running');
                logMessage('Starting UI Enhancements Integration Tests...', 'info', 'ui-results');
                
                if (typeof runCompleteUIEnhancementsTests === 'function') {
                    globalTestResults.ui = await runCompleteUIEnhancementsTests();
                    updateTestStatus('ui', globalTestResults.ui.success ? 'passed' : 'failed');
                    logMessage(`UI Tests completed: ${globalTestResults.ui.success ? 'PASSED' : 'FAILED'}`, 
                              globalTestResults.ui.success ? 'success' : 'error', 'ui-results');
                } else {
                    updateTestStatus('ui', 'failed');
                    logMessage('UI test functions not available', 'error', 'ui-results');
                }

                // Run Browser Compatibility Tests
                updateTestStatus('browser', 'running');
                logMessage('Starting Cross-Browser Compatibility Tests...', 'info', 'browser-results');
                
                if (typeof runCrossBrowserTests === 'function') {
                    globalTestResults.browser = await runCrossBrowserTests();
                    updateTestStatus('browser', globalTestResults.browser.success ? 'passed' : 'warning');
                    logMessage(`Browser Tests completed: ${globalTestResults.browser.success ? 'PASSED' : 'WARNINGS'}`, 
                              globalTestResults.browser.success ? 'success' : 'warning', 'browser-results');
                } else {
                    updateTestStatus('browser', 'failed');
                    logMessage('Browser test functions not available', 'error', 'browser-results');
                }

                // Run Calculator Integration Tests
                updateTestStatus('calculator', 'running');
                logMessage('Starting Calculator Integration Tests...', 'info', 'calculator-results');
                
                const calculatorResults = await runCalculatorIntegrationTests();
                globalTestResults.calculator = calculatorResults;
                updateTestStatus('calculator', calculatorResults.success ? 'passed' : 'failed');
                logMessage(`Calculator Tests completed: ${calculatorResults.success ? 'PASSED' : 'FAILED'}`, 
                          calculatorResults.success ? 'success' : 'error', 'calculator-results');

                // Run Performance Tests
                updateTestStatus('performance', 'running');
                logMessage('Starting Performance & Accessibility Tests...', 'info', 'performance-results');
                
                const performanceResults = await runPerformanceTests();
                globalTestResults.performance = performanceResults;
                updateTestStatus('performance', performanceResults.success ? 'passed' : 'warning');
                logMessage(`Performance Tests completed: ${performanceResults.success ? 'PASSED' : 'WARNINGS'}`, 
                          performanceResults.success ? 'success' : 'warning', 'performance-results');

                globalTestResults.endTime = performance.now();
                
                // Generate final summary
                generateTestSummary();
                
            } catch (error) {
                console.error('Error running tests:', error);
                logMessage(`Test execution failed: ${error.message}`, 'error');
            } finally {
                hideLoading('all');
            }
        }

        async function runCriticalTests() {
            console.log('‚ö° Running critical tests only...');
            globalTestResults.startTime = performance.now();
            
            showLoading('critical');
            
            try {
                // Run critical UI tests
                updateTestStatus('ui', 'running');
                if (typeof runCriticalUIEnhancementsTests === 'function') {
                    globalTestResults.ui = await runCriticalUIEnhancementsTests();
                    updateTestStatus('ui', globalTestResults.ui.success ? 'passed' : 'failed');
                }

                // Run basic calculator integration
                updateTestStatus('calculator', 'running');
                const calculatorResults = await runBasicCalculatorTests();
                globalTestResults.calculator = calculatorResults;
                updateTestStatus('calculator', calculatorResults.success ? 'passed' : 'failed');

                globalTestResults.endTime = performance.now();
                generateTestSummary();
                
            } catch (error) {
                console.error('Error running critical tests:', error);
                logMessage(`Critical test execution failed: ${error.message}`, 'error');
            } finally {
                hideLoading('critical');
            }
        }

        async function runBrowserTests() {
            console.log('üåê Running browser compatibility tests...');
            
            showLoading('browser');
            
            try {
                updateTestStatus('browser', 'running');
                if (typeof runCrossBrowserTests === 'function') {
                    globalTestResults.browser = await runCrossBrowserTests();
                    updateTestStatus('browser', globalTestResults.browser.success ? 'passed' : 'warning');
                    logMessage('Browser compatibility tests completed', 'success', 'browser-results');
                }
            } catch (error) {
                console.error('Error running browser tests:', error);
                logMessage(`Browser test execution failed: ${error.message}`, 'error');
            } finally {
                hideLoading('browser');
            }
        }

        async function runCalculatorIntegrationTests() {
            // Simulate calculator integration tests
            return new Promise((resolve) => {
                setTimeout(() => {
                    const tests = [
                        { name: 'Calculator functions exist', passed: typeof performColorDifferenceCalculation !== 'undefined' },
                        { name: 'Input validation works', passed: typeof validateCMYKInput !== 'undefined' },
                        { name: 'Color swatches present', passed: document.getElementById('target-swatch') !== null },
                        { name: 'Results section exists', passed: document.getElementById('results-section') !== null },
                        { name: 'Export functionality available', passed: typeof window.colorExport !== 'undefined' }
                    ];
                    
                    const passed = tests.filter(t => t.passed).length;
                    const total = tests.length;
                    
                    tests.forEach(test => {
                        logMessage(`${test.name}: ${test.passed ? 'PASS' : 'FAIL'}`, 
                                  test.passed ? 'success' : 'error', 'calculator-results');
                    });
                    
                    resolve({
                        success: passed === total,
                        passed,
                        total,
                        tests
                    });
                }, 1000);
            });
        }

        async function runBasicCalculatorTests() {
            // Simplified version for critical tests
            return new Promise((resolve) => {
                setTimeout(() => {
                    const basicTests = [
                        { name: 'Main calculator elements exist', passed: document.querySelector('.calculator-container') !== null },
                        { name: 'Input fields present', passed: document.querySelectorAll('input').length > 0 },
                        { name: 'Calculate button exists', passed: document.getElementById('calculate-btn') !== null }
                    ];
                    
                    const passed = basicTests.filter(t => t.passed).length;
                    const total = basicTests.length;
                    
                    basicTests.forEach(test => {
                        logMessage(`${test.name}: ${test.passed ? 'PASS' : 'FAIL'}`, 
                                  test.passed ? 'success' : 'error', 'calculator-results');
                    });
                    
                    resolve({
                        success: passed === total,
                        passed,
                        total,
                        tests: basicTests
                    });
                }, 500);
            });
        }

        async function runPerformanceTests() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const performanceTests = [
                        { name: 'Page load time acceptable', passed: performance.now() < 5000 },
                        { name: 'CSS animations optimized', passed: document.querySelector('[style*="will-change"]') !== null },
                        { name: 'Accessibility attributes present', passed: document.querySelectorAll('[aria-label]').length > 0 },
                        { name: 'Responsive design implemented', passed: document.querySelector('meta[name="viewport"]') !== null }
                    ];
                    
                    const passed = performanceTests.filter(t => t.passed).length;
                    const total = performanceTests.length;
                    
                    performanceTests.forEach(test => {
                        logMessage(`${test.name}: ${test.passed ? 'PASS' : 'FAIL'}`, 
                                  test.passed ? 'success' : 'warning', 'performance-results');
                    });
                    
                    resolve({
                        success: passed >= total - 1, // Allow one failure for performance tests
                        passed,
                        total,
                        tests: performanceTests
                    });
                }, 800);
            });
        }

        function generateTestSummary() {
            const summary = document.getElementById('test-summary');
            summary.classList.remove('hidden');
            
            // Calculate totals
            let totalTests = 0;
            let passedTests = 0;
            let failedTests = 0;
            let warningTests = 0;
            
            Object.values(globalTestResults).forEach(result => {
                if (result && typeof result === 'object' && result.passed !== undefined) {
                    totalTests += result.total || 0;
                    passedTests += result.passed || 0;
                    failedTests += (result.total - result.passed) || 0;
                }
            });
            
            const duration = globalTestResults.endTime && globalTestResults.startTime ? 
                           ((globalTestResults.endTime - globalTestResults.startTime) / 1000).toFixed(2) : '0';
            
            const successRate = totalTests > 0 ? ((passedTests / totalTests) * 100).toFixed(1) : '0';
            
            // Update summary stats
            document.getElementById('total-tests').textContent = totalTests;
            document.getElementById('passed-tests').textContent = passedTests;
            document.getElementById('failed-tests').textContent = failedTests;
            document.getElementById('warning-tests').textContent = warningTests;
            document.getElementById('success-rate').textContent = successRate + '%';
            document.getElementById('test-duration').textContent = duration + 's';
            
            // Update progress bar
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = successRate + '%';
            
            // Generate final assessment
            const assessment = document.getElementById('final-assessment');
            let assessmentText = '';
            let assessmentClass = '';
            
            if (successRate >= 95) {
                assessmentText = 'üéâ EXCELLENT! All UI enhancements are working perfectly with the existing calculator.';
                assessmentClass = 'result-success';
            } else if (successRate >= 85) {
                assessmentText = '‚úÖ GOOD! Most features are working correctly. Minor issues may need attention.';
                assessmentClass = 'result-success';
            } else if (successRate >= 70) {
                assessmentText = '‚ö†Ô∏è ACCEPTABLE! Some issues detected that should be addressed.';
                assessmentClass = 'result-warning';
            } else {
                assessmentText = '‚ùå NEEDS WORK! Significant issues detected that require immediate attention.';
                assessmentClass = 'result-error';
            }
            
            assessment.innerHTML = `<div class="result-item ${assessmentClass}">${assessmentText}</div>`;
            
            logMessage(`Final Assessment: ${assessmentText}`, successRate >= 85 ? 'success' : successRate >= 70 ? 'warning' : 'error');
        }

        function clearResults() {
            document.querySelectorAll('.test-results').forEach(container => {
                container.innerHTML = '';
            });
            
            document.querySelectorAll('.test-suite-status').forEach(status => {
                status.textContent = 'Pending';
                status.className = 'test-suite-status status-pending';
            });
            
            document.getElementById('test-summary').classList.add('hidden');
            
            globalTestResults = {
                ui: null,
                browser: null,
                calculator: null,
                performance: null,
                startTime: null,
                endTime: null
            };
            
            logMessage('Test results cleared. Ready for new tests.', 'info');
        }

        function exportResults() {
            const results = {
                timestamp: new Date().toISOString(),
                browserInfo: getBrowserInfo ? getBrowserInfo() : detectBrowserInfo(),
                testResults: globalTestResults,
                summary: {
                    totalTests: document.getElementById('total-tests').textContent,
                    passedTests: document.getElementById('passed-tests').textContent,
                    failedTests: document.getElementById('failed-tests').textContent,
                    successRate: document.getElementById('success-rate').textContent,
                    duration: document.getElementById('test-duration').textContent
                }
            };
            
            const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ui-enhancements-test-report-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            logMessage('Test report exported successfully', 'success');
        }

        function openMainApp() {
            window.open('index.html', '_blank');
        }
    </script>
</body>
</html>